<!-- Bootstrap 4 CSS -->
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-beta.2/css/bootstrap.css'>
<!-- Telephone Input CSS -->
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/12.1.2/css/intlTelInput.css'>
<!-- Icons CSS -->
<link rel='stylesheet' href='https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css'>
<!-- Nice Select CSS -->
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/css/nice-select.min.css'>

<style>
  @import url('https://fonts.googleapis.com/css?family=Roboto&display=swap');
  @import url('https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css');

  * {
    margin: 0;
    padding: 0;
  }

  body {
    font-family: 'Roboto', sans-serif;
    font-style: normal;
    font-weight: 300;
    font-smoothing: antialiased;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-size: 15px;
    background: #eee;
  }

  .intro {
    background: #fff;
    padding: 60px 30px;
    color: #333;
    margin-bottom: 15px;
    line-height: 1.5;
    text-align: center;
  }

  .intro h1 {
    font-size: 18pt;
    padding-bottom: 15px;

  }

  .intro p {
    font-size: 14px;
  }

  .action {
    text-align: center;
    display: block;
    margin-top: 20px;
  }

  a.btn {
    text-decoration: none;
    color: #666;
    border: 2px solid #666;
    padding: 10px 15px;
    display: inline-block;
    margin-left: 5px;
  }

  a.btn:hover {
    background: #666;
    color: #fff;
    transition: .3s;
    -webkit-transition: .3s;
  }

  .btn:before {
    font-family: FontAwesome;
    font-weight: normal;
    margin-right: 10px;
  }

  .github:before {
    content: "\f09b"
  }

  .down:before {
    content: "\f019"
  }

  .back:before {
    content: "\f112"
  }

  .credit {
    background: #fff;
    padding: 12px;
    font-size: 9pt;
    text-align: center;
    color: #333;
    margin-top: 40px;

  }

  .credit span:before {
    font-family: FontAwesome;
    color: #e41b17;
    content: "\f004";


  }

  .credit a {
    color: #333;
    text-decoration: none;
  }

  .credit a:hover {
    color: #1DBF73;
  }

  .credit a:hover:after {
    font-family: FontAwesome;
    content: "\f08e";
    font-size: 9pt;
    position: absolute;
    margin: 3px;
  }

  main {
    background: #fff;
    padding: : 20px;

  }

  article h1,
  article h2,
  article h3,
  article h4,
  article p {
    padding: 14px;
    color: #333;
  }

  article p {
    font-size: 15px;
    line-height: 1.5;
  }

  @media only screen and (min-width: 820px) {
    main {
      max-width: 820px;
      margin-left: auto;
      margin-right: auto;
      padding: 24px;
    }


  }

  .set-overlayer,
  .set-glass,
  .set-sticky {
    cursor: pointer;
    height: 45px;
    line-height: 45px;
    padding: 0 15px;
    color: #333;
    font-size: 16px;
  }

  .set-overlayer:after,
  .set-glass:after,
  .to-active:after,
  .set-sticky:after {
    font-family: FontAwesome;
    font-size: 18pt;
    position: relative;
    float: right;
  }

  .set-overlayer:after,
  .set-glass:after,
  .set-sticky:after {
    content: "\f204";
    transition: .6s;
  }

  .to-active:after {
    content: "\f205";
    color: #008080;
    transition: .6s;
  }

  .set-overlayer,
  .set-glass,
  .set-sticky,
  .source,
  .theme-tray {
    margin: 10px;
    background: #f2f2f2;
    border-radius: 5px;
    border: 2px solid #f1f1f1;
    box-sizing: border-box;
  }

  /* Syntax Highlighter*/

  pre.prettyprint {
    padding: 15px !important;
    margin: 10px;
    border: 0 !important;
    background: #f2f2f2;
    overflow: auto;
  }

  .source {
    white-space: pre;
    overflow: auto;
    max-height: 400px;
  }

  code {
    border: 1px solid #ddd;
    padding: 2px;
    border-radius: 2px;
  }

  /*font Variables*/
  /*Color Variables*/
  @import url("https://fonts.googleapis.com/css?family=Roboto:300i,400,400i,500,700,900");

  .multi_step_form {
    background: #f6f9fb;
    display: block;
    overflow-x: hidden;
  }

  .multi_step_form #msform {
    text-align: center;
    position: relative;
    padding-top: 50px;
    min-height: 820px;
    height: auto;
    max-width: 820px;
    margin: 0 auto;
    background: #ffffff;
    z-index: 1;
  }

  .multi_step_form #msform .tittle {
    text-align: center;
    padding-bottom: 55px;
  }

  .multi_step_form #msform .tittle h2 {
    font: 500 24px/35px "Roboto", sans-serif;
    color: #3f4553;
    padding-bottom: 5px;
  }

  .multi_step_form #msform .tittle p {
    font: 400 16px/28px "Roboto", sans-serif;
    color: #5f6771;
  }

  .multi_step_form #msform fieldset {
    border: 0;
    padding: 20px 105px 0;
    position: relative;
    width: 100%;
    left: 0;
    right: 0;
  }

  .multi_step_form #msform fieldset:not(:first-of-type) {
    display: none;
  }

  .multi_step_form #msform fieldset h3 {
    font: 500 18px/35px "Roboto", sans-serif;
    color: #3f4553;
  }

  .multi_step_form #msform fieldset h6 {
    font: 400 15px/28px "Roboto", sans-serif;
    color: #5f6771;
    padding-bottom: 30px;
  }

  .multi_step_form #msform fieldset .intl-tel-input {
    display: block;
    background: transparent;
    border: 0;
    box-shadow: none;
    outline: none;
  }

  .multi_step_form #msform fieldset .intl-tel-input .flag-container .selected-flag {
    padding: 0 20px;
    background: transparent;
    border: 0;
    box-shadow: none;
    outline: none;
    width: 65px;
  }

  .multi_step_form #msform fieldset .intl-tel-input .flag-container .selected-flag .iti-arrow {
    border: 0;
  }

  .multi_step_form #msform fieldset .intl-tel-input .flag-container .selected-flag .iti-arrow:after {
    content: "\f35f";
    position: absolute;
    top: 0;
    right: 0;
    font: normal normal normal 24px/7px Ionicons;
    color: #5f6771;
  }

  .multi_step_form #msform fieldset #phone {
    padding-left: 80px;
  }

  .multi_step_form #msform fieldset .form-group {
    padding: 0 10px;
  }

  .multi_step_form #msform fieldset .fg_2,
  .multi_step_form #msform fieldset .fg_3 {
    padding-top: 10px;
    display: block;
    overflow: hidden;
  }

  .multi_step_form #msform fieldset .fg_3 {
    padding-bottom: 70px;
  }

  .multi_step_form #msform fieldset .form-control,
  .multi_step_form #msform fieldset .product_select {
    border-radius: 3px;
    border: 1px solid #d8e1e7;
    padding: 0 20px;
    height: auto;
    font: 400 15px/48px "Roboto", sans-serif;
    color: #5f6771;
    box-shadow: none;
    outline: none;
    width: 100%;
  }

  .multi_step_form #msform fieldset .form-control.placeholder,
  .multi_step_form #msform fieldset .product_select.placeholder {
    color: #5f6771;
  }

  .multi_step_form #msform fieldset .form-control:-moz-placeholder,
  .multi_step_form #msform fieldset .product_select:-moz-placeholder {
    color: #5f6771;
  }

  .multi_step_form #msform fieldset .form-control::-moz-placeholder,
  .multi_step_form #msform fieldset .product_select::-moz-placeholder {
    color: #5f6771;
  }

  .multi_step_form #msform fieldset .form-control::-webkit-input-placeholder,
  .multi_step_form #msform fieldset .product_select::-webkit-input-placeholder {
    color: #5f6771;
  }

  .multi_step_form #msform fieldset .form-control:hover,
  .multi_step_form #msform fieldset .form-control:focus,
  .multi_step_form #msform fieldset .product_select:hover,
  .multi_step_form #msform fieldset .product_select:focus {
    border-color: #5cb85c;
  }

  .multi_step_form #msform fieldset .form-control:focus.placeholder,
  .multi_step_form #msform fieldset .product_select:focus.placeholder {
    color: transparent;
  }

  .multi_step_form #msform fieldset .form-control:focus:-moz-placeholder,
  .multi_step_form #msform fieldset .product_select:focus:-moz-placeholder {
    color: transparent;
  }

  .multi_step_form #msform fieldset .form-control:focus::-moz-placeholder,
  .multi_step_form #msform fieldset .product_select:focus::-moz-placeholder {
    color: transparent;
  }

  .multi_step_form #msform fieldset .form-control:focus::-webkit-input-placeholder,
  .multi_step_form #msform fieldset .product_select:focus::-webkit-input-placeholder {
    color: transparent;
  }

  .multi_step_form #msform fieldset .product_select:after {
    display: none;
  }

  .multi_step_form #msform fieldset .product_select:before {
    content: "\f35f";
    position: absolute;
    top: 0;
    right: 20px;
    font: normal normal normal 24px/48px Ionicons;
    color: #5f6771;
  }

  .multi_step_form #msform fieldset .product_select .list {
    width: 100%;
  }

  .multi_step_form #msform fieldset .done_text {
    padding-top: 40px;
  }

  .multi_step_form #msform fieldset .done_text .don_icon {
    height: 36px;
    width: 36px;
    line-height: 36px;
    font-size: 22px;
    margin-bottom: 10px;
    background: #5cb85c;
    display: inline-block;
    border-radius: 50%;
    color: #ffffff;
    text-align: center;
  }

  .multi_step_form #msform fieldset .done_text h6 {
    line-height: 23px;
  }

  .multi_step_form #msform fieldset .code_group {
    margin-bottom: 60px;
  }

  .multi_step_form #msform fieldset .code_group .form-control {
    border: 0;
    border-bottom: 1px solid #a1a7ac;
    border-radius: 0;
    display: inline-block;
    width: 30px;
    font-size: 30px;
    color: #5f6771;
    padding: 0;
    margin-right: 7px;
    text-align: center;
    line-height: 1;
  }

  .multi_step_form #msform fieldset .passport {
    margin-top: -10px;
    padding-bottom: 30px;
    position: relative;
  }

  .multi_step_form #msform fieldset .passport .don_icon {
    height: 36px;
    width: 36px;
    line-height: 36px;
    font-size: 22px;
    position: absolute;
    top: 4px;
    right: 0;
    background: #5cb85c;
    display: inline-block;
    border-radius: 50%;
    color: #ffffff;
    text-align: center;
  }

  .multi_step_form #msform fieldset .passport h4 {
    font: 500 15px/23px "Roboto", sans-serif;
    color: #5f6771;
    padding: 0;
  }

  .multi_step_form #msform fieldset .input-group {
    padding-bottom: 40px;
  }

  .multi_step_form #msform fieldset .input-group .custom-file {
    width: 100%;
    height: auto;
  }

  .multi_step_form #msform fieldset .input-group .custom-file .custom-file-label {
    width: 168px;
    border-radius: 5px;
    cursor: pointer;
    font: 700 14px/40px "Roboto", sans-serif;
    border: 1px solid #99a2a8;
    text-align: center;
    transition: all 300ms linear 0s;
    color: #5f6771;
  }

  .multi_step_form #msform fieldset .input-group .custom-file .custom-file-label i {
    font-size: 20px;
    padding-right: 10px;
  }

  .multi_step_form #msform fieldset .input-group .custom-file .custom-file-label:hover,
  .multi_step_form #msform fieldset .input-group .custom-file .custom-file-label:focus {
    background: #5cb85c;
    border-color: #5cb85c;
    color: #fff;
  }

  .multi_step_form #msform fieldset .input-group .custom-file input {
    display: none;
  }

  .multi_step_form #msform fieldset .file_added {
    text-align: left;
    padding-left: 190px;
    padding-bottom: 60px;
  }

  .multi_step_form #msform fieldset .file_added li {
    font: 400 15px/28px "Roboto", sans-serif;
    color: #5f6771;
  }

  .multi_step_form #msform fieldset .file_added li a {
    color: #5cb85c;
    font-weight: 500;
    display: inline-block;
    position: relative;
    padding-left: 15px;
  }

  .multi_step_form #msform fieldset .file_added li a i {
    font-size: 22px;
    padding-right: 8px;
    position: absolute;
    left: 0;
    transform: rotate(20deg);
  }

  .multi_step_form #msform #progressbar {
    margin-bottom: 30px;
    overflow: hidden;
  }

  .multi_step_form #msform #progressbar li {
    list-style-type: none;
    color: #99a2a8;
    font-size: 9px;
    width: calc(100%/3);
    float: left;
    position: relative;
    font: 500 13px/1 "Roboto", sans-serif;
  }

  .multi_step_form #msform #progressbar li:nth-child(2):before {
    content: "\f12f";
  }

  .multi_step_form #msform #progressbar li:nth-child(3):before {
    content: "\f457";
  }

  .multi_step_form #msform #progressbar li:before {
    content: "\f1fa";
    font: normal normal normal 30px/50px Ionicons;
    width: 50px;
    height: 50px;
    line-height: 50px;
    display: block;
    background: #eaf0f4;
    border-radius: 50%;
    margin: 0 auto 10px auto;
  }

  .multi_step_form #msform #progressbar li:after {
    content: '';
    width: 100%;
    height: 10px;
    background: #eaf0f4;
    position: absolute;
    left: -50%;
    top: 21px;
    z-index: -1;
  }

  .multi_step_form #msform #progressbar li:last-child:after {
    width: 150%;
  }

  .multi_step_form #msform #progressbar li.active {
    color: #5cb85c;
  }

  .multi_step_form #msform #progressbar li.active:before,
  .multi_step_form #msform #progressbar li.active:after {
    background: #5cb85c;
    color: white;
  }

  .submit {
    background-color: #5cb85c;
    color: white;
    border: 0 none;
    border-radius: 5px;
    cursor: pointer;
    min-width: 130px;
    font: 700 14px/40px "Roboto", sans-serif;
    border: 1px solid #5cb85c;
    margin: 0 5px;
    text-transform: uppercase;
    display: inline-block;
  }

  .multi_step_form #msform .action-button {
    background: #5cb85c;
    color: white;
    border: 0 none;
    border-radius: 5px;
    cursor: pointer;
    min-width: 130px;
    font: 700 14px/40px "Roboto", sans-serif;
    border: 1px solid #5cb85c;
    margin: 0 5px;
    text-transform: uppercase;
    display: inline-block;
  }

  .multi_step_form #msform .submit:hover,
  .multi_step_form #msform .submit:focus {
    background: #405867;
    border-color: #405867;
  }

  .multi_step_form #msform .action-button:hover,
  .multi_step_form #msform .action-button:focus {
    background: #405867;
    border-color: #405867;
  }

  .multi_step_form #msform .previous_button {
    background: transparent;
    color: #99a2a8;
    border-color: #99a2a8;
  }

  .multi_step_form #msform .previous_button:hover,
  .multi_step_form #msform .previous_button:focus {
    background: #405867;
    border-color: #405867;
    color: #fff;
  }
</style>
<main style="margin-top: 25px;">
  <article>

    <!-- Start Multiform HTML -->
    <section class="multi_step_form" style="margin-bottom:25px;">
      <form id="msform">
        <!-- Tittle -->
        <div class="tittle">
          <h2>Verification Process</h2>
          <p>In order to use this service, you have to complete this verification process</p>
        </div>
        <!-- progressbar -->
        <ul id="progressbar" style="display:flex;">
          <li class="active">Verify Phone</li>
          <li>Upload Documents</li>
          <li>Payments</li>
        </ul>
        <!-- fieldsets -->
        <fieldset>
          {{#if user.phone}}
          <div id="second">
            <div class="done_text">
              <a href="#" class="don_icon"><i class="ion-android-done"></i></a>
              <h3>Phone Verification completed successfully</h3>
            </div>
            <br>

          </div>
          {{else}}
          <div id="first">
            <h3>Setup your phone</h3>
            <h6>We will send you a SMS. Input the code to verify.</h6>
            <div class="form-row">
              <div class="form-group col-md-6">
                <input type="tel" id="phone" class="form-control">
              </div>
              <div class="form-group col-md-6">
                <input type="text" class="form-control" placeholder="Enter phone" id="phnum" maxlength="10">
              </div>
            </div>
            <button type="button" class="action-button mt-5" onclick="requestOTP()" id="otpSubmit">Submit</button>
            <h6 style="display: none;" id="exists">Wrong Otp</h6>
            <div style="display: none;" id="otp">
              <div class="done_text">
                <a href="#" class="don_icon"><i class="ion-android-done"></i></a>
                <h6>A secret code is sent to your phone. <br>Please enter it here.</h6>
              </div>
              <div class="code_group">
                <input type="text" class="form-control" id="n1" placeholder="0" maxlength="1">
                <input type="text" class="form-control" id="n2" placeholder="0" maxlength="1">
                <input type="text" class="form-control" id="n3" placeholder="0" maxlength="1">
                <input type="text" class="form-control" id="n4" placeholder="0" maxlength="1">
                <input type="text" class="form-control" id="n5" placeholder="0" maxlength="1">
                <input type="text" class="form-control" id="n6" placeholder="0" maxlength="1">

              </div>
              <button type="button" class="action-button mt-5" onclick="verifyOTP()" id="otpSubmit2">Submit</button>
            </div>
            <br>
            <br>
            <h6 style="display: none;" id="wrngotp">Wrong Otp</h6>

          </div>
          <div id="second" style="display: none;">
            <div class="done_text">
              <a href="#" class="don_icon"><i class="ion-android-done"></i></a>
              <h3>Phone Verification completed successfully</h3>
            </div>
            <br>
            </div>
            {{/if}}

            <button type="button" id="otpbtn" class="next action-button" style="display: none;">Continue</button>
        </fieldset>
        <fieldset>
          {{#if user.document}}
          <div>
            <div class="done_text">
              <a href="#" class="don_icon"><i class="ion-android-done"></i></a>
              <h3>Document uploaded for verification </h3>
            </div>
            <br>
          </div>
          {{else}}
          <div id="third" style="display: none;">
            <div class="done_text">
              <a href="#" class="don_icon"><i class="ion-android-done"></i></a>
              <h3>Document uploaded for verification </h3>
            </div>
            <br>
          </div>
          <div id="fourth">
            <h3>Verify Your Personal Details</h3>
            <h6>Please upload any of these documents to verify your Identity.</h6>

            <div class="input-group">
              <div class="form-group fg_2" style="position:absolute;width:350px">
                <input type="text" class="form-control" required name="panNum" id="panNum"
                  style="text-transform: uppercase;" placeholder="PAN number">
              </div>
              <div class="custom-file" style="margin-left:400px;margin-top:10px;">
                <input type="file" class="custom-file-input" id="upload" name="pan" required onchange="viewImag(event)">
                <label class="custom-file-label" for="upload"><i class="ion-android-cloud-outline"></i>PAN Card</label>
              </div>
            </div>
            <div class="input-group">
              <div class="form-group fg_2" style="position:absolute;width:350px">
                <input type="text" class="form-control" placeholder="Account Number" id="bankNum" name="bankNum">
              </div>
              <div class="custom-file" style="margin-left:400px;margin-top:10px;">
                <input type="file" class="custom-file-input" id="uploadw"  name="bank" onchange="viewImage(event)">
                <label class="custom-file-label" for="uploadw" ><i class="ion-android-cloud-outline"></i>Bank
                  Card</label>
              </div>

            </div>
            <div class="input-group">
              <div class="form-group fg_2" style="position:absolute;width:350px">
                <input type="text" class="form-control" name="ifsc" id="ifsc" placeholder="IFSC Code"
                  style="text-transform: uppercase;">
              </div>
            </div>

            <ul class="file_added mt-5" style="list-style-type: none;">
              <h6>Files Added</h6>
              <li style=""><a href="#" style="text-decoration: none;"><i class="ion-paperclip"></i>Pan card</a>
                <img src="" id="imgView" alt="" style="height: 200px;width:300px; display:none;">
              </li>
              <li><a href="#"><i class="ion-paperclip"></i>Bank Card </a>
                <img src="" id="imgVieww" alt="" style="height: 200px;width:300px; display:none;">
              </li>
            </ul>
          </div>
          {{/if}}
          <h6 class="text-danger" style="display: none;" id="error">Please Fill all the feilds </h6>
          <h6 class="text-success" style="display: none;" id="done">Documents submitted for verification</h6>
          <button type="button" class="action-button previous previous_button">Back</button>
          {{#if user.document}}
          <button type="button" class="next action-button" id="continueShow">Continue</button>

          {{else}}
          <button type="button" class="submit" onclick="submitDetails()" id="submitHide">Sumit</button>
          {{/if}}
          <button type="button" class="next action-button" id="continueShow" style="display: none;">Continue</button>
        </fieldset>
        <fieldset>
          <h3>Just Pay 250 and Start earning</h3>
          <h6>Just one more step to complete the verification</h6>
          <button type="button" class="submit" onclick="paymentRazor()" id="submitHide">Pay Rs. 250</button><br><br><br>
          <button type="button" class="action-button previous previous_button">Back</button>
          <a href="#" class="action-button">Finish</a>
        </fieldset>
      </form>
    </section>
    <!-- END Multiform HTML -->
  </article>
</main>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
  function submitDetails() {
    console.log('Submiteed')
    let pan = $('#panNum').val()
    let bank = $('#bankNum').val()
    let ifsc = $('#ifsc').val()
    var imagePa = document.getElementById('upload').files[0]
    var imageBan = document.getElementById('uploadw').files[0]
    var formData = new FormData()
    formData.append('upload', imagePa)
    formData.append('uploadw', imageBan)
    formData.append('pan', pan)
    formData.append('bank', bank)
    formData.append('ifsc', ifsc)

    if (pan == '' || bank == '' || ifsc == '' || imageBan == '' || imagePa == '') {
      $('#error').show()
    }
    else {
      $.ajax({
        method: 'POST',
        url: '/documentUpload',

        processData: false,
        contentType: false,
        cache: false,
        data: formData,
        success: (response) => {
          if (response) {
            $('#submitHide').hide()
            $('#continueShow').show()
            $('#third').show()
            $('#fourth').hide()
          }
        }
      })
    }

  }
  function paymentRazor() {
    $.ajax({
      method: 'post',
      url: '/paymentRazorpay',
      success: (response) => {
        if (response) {

          razorpayPayment(response)
        }
      }
    })
  }
  function razorpayPayment(order) {
    console.log(order)
    var options = {
      "key": "rzp_test_VQhP9t51w4WZYW", // Enter the Key ID generated from the Dashboard
      "amount": order.amount, // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
      "currency": "INR",
      "name": "Royal Hub",
      "description": "Test Transaction",
      "image": "https://example.com/your_logo",
      "order_id": order.id, //This is a sample Order ID. Pass the `id` obtained in the response of Step 1
      "handler": function (response) {
        {
          {
            {
              // {
              //   !--alert(response.razorpay_payment_id);
              // alert(response.razorpay_order_id);
              //alert(response.razorpay_signature); --}
            }
          }
        }
        verifyPayment(response, order)
      },
      "prefill": {
        "name": order.user.name,
        "email": order.user.email,
        "contact": order.user.phone
      },
      "notes": {
        "address": "Razorpay Corporate Office"
      },
      "theme": {
        "color": "#3399cc"
      }


    };
    var rzp1 = new Razorpay(options);
    rzp1.open();
  }
  function verifyPayment(payment, order) {
    $.ajax({
      url: '/verify-payment',
      method: 'post',
      data: {
        payment,
        order
      },
      success: (response) => {
        console.log(response, "response")
        if (response.status) {
          window.location.href = '/invite'
        } else {
          alert('payment failed')
        }
      }
    })
  }
  function viewImage(event) {
    console.log('Called one')
    document.getElementById('imgVieww').src = URL.createObjectURL(event.target.files[0])
    $('#imgVieww').show()
  }
  function viewImag(event) {
    console.log('Called two')

    document.getElementById('imgView').src = URL.createObjectURL(event.target.files[0])
    $('#imgView').show()
  }
</script>

<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-beta/js/bootstrap.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/12.1.2/js/intlTelInput.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/js/jquery.nice-select.min.js'></script>
<script>
  (function ($) {
    "use strict";

    //* Form js
    function verificationForm() {
      //jQuery time
      var current_fs, next_fs, previous_fs; //fieldsets
      var left, opacity, scale; //fieldset properties which we will animate
      var animating; //flag to prevent quick multi-click glitches

      $(".next").click(function () {
        if (animating) return false;
        animating = true;

        current_fs = $(this).parent();
        next_fs = $(this).parent().next();

        //activate next step on progressbar using the index of next_fs
        $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");

        //show the next fieldset
        next_fs.show();
        //hide the current fieldset with style
        current_fs.animate({
          opacity: 0
        }, {
          step: function (now, mx) {
            //as the opacity of current_fs reduces to 0 - stored in "now"
            //1. scale current_fs down to 80%
            scale = 1 - (1 - now) * 0.2;
            //2. bring next_fs from the right(50%)
            left = (now * 50) + "%";
            //3. increase opacity of next_fs to 1 as it moves in
            opacity = 1 - now;
            current_fs.css({
              'transform': 'scale(' + scale + ')',
              'position': 'absolute'
            });
            next_fs.css({
              'left': left,
              'opacity': opacity
            });
          },
          duration: 800,
          complete: function () {
            current_fs.hide();
            animating = false;
          },
          //this comes from the custom easing plugin
          easing: 'easeInOutBack'
        });
      });

      $(".previous").click(function () {
        if (animating) return false;
        animating = true;

        current_fs = $(this).parent();
        previous_fs = $(this).parent().prev();

        //de-activate current step on progressbar
        $("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");

        //show the previous fieldset
        previous_fs.show();
        //hide the current fieldset with style
        current_fs.animate({
          opacity: 0
        }, {
          step: function (now, mx) {
            //as the opacity of current_fs reduces to 0 - stored in "now"
            //1. scale previous_fs from 80% to 100%
            scale = 0.8 + (1 - now) * 0.2;
            //2. take current_fs to the right(50%) - from 0%
            left = ((1 - now) * 50) + "%";
            //3. increase opacity of previous_fs to 1 as it moves in
            opacity = 1 - now;
            current_fs.css({
              'left': left
            });
            previous_fs.css({
              'transform': 'scale(' + scale + ')',
              'opacity': opacity
            });
          },
          duration: 800,
          complete: function () {
            current_fs.hide();
            animating = false;
          },
          //this comes from the custom easing plugin
          easing: 'easeInOutBack'
        });
      });

      $(".submit").click(function () {
        return false;
      })
    };

    //* Add Phone no select
    function phoneNoselect() {
      if ($('#msform').length) {
        $("#phone").intlTelInput();
        $("#phone").intlTelInput("setNumber", "+91");
      };
    };
    //* Select js
    function nice_Select() {
      if ($('.product_select').length) {
        $('select').niceSelect();
      };
    };
    /*Function Calls*/
    verificationForm();
    phoneNoselect();
    nice_Select();
  })(jQuery);
</script>
<script>
  function requestOTP() {
    let cc = $('#phone').val()
    let phnum = $('#phnum').val()
    let mobile = cc + phnum
    console.log(mobile)
    $.ajax({
      method: 'post',
      url: '/requestOTP',
      data: {
        mobile
      },
      success(response) {
        if (response) {
          $('#otp').show()
          $('#otpSubmit').hide()
          $('#otpSubmit2').show()
        }
      }
    })
  }
  function verifyOTP() {
    let num1 = $('#n1').val()
    let num2 = $('#n2').val()
    let num3 = $('#n3').val()
    let num4 = $('#n4').val()
    let num5 = $('#n5').val()
    let num6 = $('#n6').val()
    let otp = num1 + num2 + num3 + num4 + num5 + num6
    console.log(otp)
    $.ajax({
      method: 'post',
      url: '/verifyOTP',
      data: {
        otp
      },
      success: (response) => {
        console.log(response)
        if (response.otp) {
          $('#first').hide()
          $('#second').show()
          $('#otpbtn').show()
        }
        else {
          $('#wrngotp').show()
        }
      }
    })
  }

</script>